(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{244:function(t,e,n){var content=n(432);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(36).default)("28f1127f",content,!0,{sourceMap:!1})},254:function(t,e){},430:function(t,e,n){var map={"./af":260,"./af.js":260,"./ar":261,"./ar-dz":262,"./ar-dz.js":262,"./ar-kw":263,"./ar-kw.js":263,"./ar-ly":264,"./ar-ly.js":264,"./ar-ma":265,"./ar-ma.js":265,"./ar-sa":266,"./ar-sa.js":266,"./ar-tn":267,"./ar-tn.js":267,"./ar.js":261,"./az":268,"./az.js":268,"./be":269,"./be.js":269,"./bg":270,"./bg.js":270,"./bm":271,"./bm.js":271,"./bn":272,"./bn-bd":273,"./bn-bd.js":273,"./bn.js":272,"./bo":274,"./bo.js":274,"./br":275,"./br.js":275,"./bs":276,"./bs.js":276,"./ca":277,"./ca.js":277,"./cs":278,"./cs.js":278,"./cv":279,"./cv.js":279,"./cy":280,"./cy.js":280,"./da":281,"./da.js":281,"./de":282,"./de-at":283,"./de-at.js":283,"./de-ch":284,"./de-ch.js":284,"./de.js":282,"./dv":285,"./dv.js":285,"./el":286,"./el.js":286,"./en-au":287,"./en-au.js":287,"./en-ca":288,"./en-ca.js":288,"./en-gb":289,"./en-gb.js":289,"./en-ie":290,"./en-ie.js":290,"./en-il":291,"./en-il.js":291,"./en-in":292,"./en-in.js":292,"./en-nz":293,"./en-nz.js":293,"./en-sg":294,"./en-sg.js":294,"./eo":295,"./eo.js":295,"./es":296,"./es-do":297,"./es-do.js":297,"./es-mx":298,"./es-mx.js":298,"./es-us":299,"./es-us.js":299,"./es.js":296,"./et":300,"./et.js":300,"./eu":301,"./eu.js":301,"./fa":302,"./fa.js":302,"./fi":303,"./fi.js":303,"./fil":304,"./fil.js":304,"./fo":305,"./fo.js":305,"./fr":306,"./fr-ca":307,"./fr-ca.js":307,"./fr-ch":308,"./fr-ch.js":308,"./fr.js":306,"./fy":309,"./fy.js":309,"./ga":310,"./ga.js":310,"./gd":311,"./gd.js":311,"./gl":312,"./gl.js":312,"./gom-deva":313,"./gom-deva.js":313,"./gom-latn":314,"./gom-latn.js":314,"./gu":315,"./gu.js":315,"./he":316,"./he.js":316,"./hi":317,"./hi.js":317,"./hr":318,"./hr.js":318,"./hu":319,"./hu.js":319,"./hy-am":320,"./hy-am.js":320,"./id":321,"./id.js":321,"./is":322,"./is.js":322,"./it":323,"./it-ch":324,"./it-ch.js":324,"./it.js":323,"./ja":325,"./ja.js":325,"./jv":326,"./jv.js":326,"./ka":327,"./ka.js":327,"./kk":328,"./kk.js":328,"./km":329,"./km.js":329,"./kn":330,"./kn.js":330,"./ko":331,"./ko.js":331,"./ku":332,"./ku.js":332,"./ky":333,"./ky.js":333,"./lb":334,"./lb.js":334,"./lo":335,"./lo.js":335,"./lt":336,"./lt.js":336,"./lv":337,"./lv.js":337,"./me":338,"./me.js":338,"./mi":339,"./mi.js":339,"./mk":340,"./mk.js":340,"./ml":341,"./ml.js":341,"./mn":342,"./mn.js":342,"./mr":343,"./mr.js":343,"./ms":344,"./ms-my":345,"./ms-my.js":345,"./ms.js":344,"./mt":346,"./mt.js":346,"./my":347,"./my.js":347,"./nb":348,"./nb.js":348,"./ne":349,"./ne.js":349,"./nl":350,"./nl-be":351,"./nl-be.js":351,"./nl.js":350,"./nn":352,"./nn.js":352,"./oc-lnc":353,"./oc-lnc.js":353,"./pa-in":354,"./pa-in.js":354,"./pl":355,"./pl.js":355,"./pt":356,"./pt-br":357,"./pt-br.js":357,"./pt.js":356,"./ro":358,"./ro.js":358,"./ru":359,"./ru.js":359,"./sd":360,"./sd.js":360,"./se":361,"./se.js":361,"./si":362,"./si.js":362,"./sk":363,"./sk.js":363,"./sl":364,"./sl.js":364,"./sq":365,"./sq.js":365,"./sr":366,"./sr-cyrl":367,"./sr-cyrl.js":367,"./sr.js":366,"./ss":368,"./ss.js":368,"./sv":369,"./sv.js":369,"./sw":370,"./sw.js":370,"./ta":371,"./ta.js":371,"./te":372,"./te.js":372,"./tet":373,"./tet.js":373,"./tg":374,"./tg.js":374,"./th":375,"./th.js":375,"./tk":376,"./tk.js":376,"./tl-ph":377,"./tl-ph.js":377,"./tlh":378,"./tlh.js":378,"./tr":379,"./tr.js":379,"./tzl":380,"./tzl.js":380,"./tzm":381,"./tzm-latn":382,"./tzm-latn.js":382,"./tzm.js":381,"./ug-cn":383,"./ug-cn.js":383,"./uk":384,"./uk.js":384,"./ur":385,"./ur.js":385,"./uz":386,"./uz-latn":387,"./uz-latn.js":387,"./uz.js":386,"./vi":388,"./vi.js":388,"./x-pseudo":389,"./x-pseudo.js":389,"./yo":390,"./yo.js":390,"./zh-cn":391,"./zh-cn.js":391,"./zh-hk":392,"./zh-hk.js":392,"./zh-mo":393,"./zh-mo.js":393,"./zh-tw":394,"./zh-tw.js":394};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=430},431:function(t,e,n){"use strict";var r=n(244);n.n(r).a},432:function(t,e,n){(e=n(35)(!1)).push([t.i,'.page{padding:20px;float:right}.status-style{position:relative;margin-right:6px}.status-style:after{content:"";position:absolute;top:10px;right:-7px;width:6px;height:1px;background:#dcdee2}',""]),t.exports=e},437:function(t,e,n){"use strict";n.r(e);n(37),n(52),n(38),n(109),n(110),n(81),n(39),n(51);var r,o=n(73),c=n(107),l=n(245),j=n.n(l),m=n(108);n(230);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d=(r={props:{},data:function(){return{socket:null,searchForm:{belongProject:"",branchName:"",commitPerson:"",commitTime:[]},belongProject:"",branchName:"",commitPerson:"",commitTime:[],current:1,limit:20,total:0,statusMap:{0:{type:"warning",label:"打包中 ···"},1:{type:"success",label:"打包成功"},2:{type:"error",label:"打包失败"},3:{type:"default",label:"打包取消"}},columns:[{title:"项目名",key:"belongProject"},{title:"分支名",key:"branchName"},{title:"提交人",key:"commitPerson"},{title:"提交时间",key:"commitTime"},{title:"提交描述",key:"commitMsg"},{title:"状态",slot:"status",width:150},{title:"Action",slot:"action",width:150}],tableData:[],isUpdateSocket:!0}},computed:{},created:function(){},beforeDestroy:function(){this.socket.disconnect()},mounted:function(){this.connectSocket(),this.getData()}},Object(o.a)(r,"computed",{query:function(){return f(f({},this.searchForm),{},{limit:this.limit,offset:this.current})},userInfo:function(){return this.$store.state.userInfo}}),Object(o.a)(r,"methods",{interruptAuth:function(t){return 0===this.userInfo.identity||this.userInfo.username===t},connectSocket:function(){var t=this;this.socket=j()(m.a.BASE_URL,{withCredentials:!1}),this.socket.on("connect",(function(){console.log("connection success")})),this.socket.on("message",(function(e){"UPDATE_LIST_VIEW"===e.type&&1===t.current&&t.isUpdateSocket&&(t.isUpdateSocket=!1,t.getData(),setTimeout((function(){t.isUpdateSocket=!0}),10))}))},handleSubmit:function(t){t||(this.searchForm={}),this.current=1,this.getData()},getData:function(){var t=this;c.a.get(m.a.BUNDLER_LIST,{params:this.query}).then((function(data){t.tableData=data.data||[],t.total=data.total})).catch((function(t){return console.error(t)}))},handleChangeLimit:function(t){this.limit=t,this.getData()},handleChangePage:function(t){this.current=t,this.getData()},handleInterrupt:function(t,e){var n=this,r=t.soloId,o=t.branchName,l=t.belongProject;c.a.put(m.a.BUNDLER_INTERRUPT,{id:r,branchName:o,belongProject:l}).then((function(data){1===data.code?n.tableData[e].buildStatus=7:n.$Message.warning("中断失败")})).catch((function(t){return console.error(t)}))},handleDetail:function(t,e){this.$router.push({path:"detail/"+t})}}),r),y=(n(431),n(23)),component=Object(y.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Form",{ref:"formInline",attrs:{model:t.searchForm,"label-width":80,inline:""}},[n("FormItem",{attrs:{label:"项目名"}},[n("Input",{staticStyle:{width:"200px"},model:{value:t.searchForm.belongProject,callback:function(e){t.$set(t.searchForm,"belongProject",e)},expression:"searchForm.belongProject"}})],1),t._v(" "),n("FormItem",{attrs:{label:"分支名"}},[n("Input",{staticStyle:{width:"200px"},model:{value:t.searchForm.branchName,callback:function(e){t.$set(t.searchForm,"branchName",e)},expression:"searchForm.branchName"}})],1),t._v(" "),n("FormItem",{attrs:{label:"提交人"}},[n("Input",{staticStyle:{width:"200px"},model:{value:t.searchForm.commitPerson,callback:function(e){t.$set(t.searchForm,"commitPerson",e)},expression:"searchForm.commitPerson"}})],1),t._v(" "),n("FormItem",{attrs:{label:"提交时间"}},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placement:"bottom-end"},on:{"on-change":function(e){t.searchForm.commitTime=e}},model:{value:t.searchForm.commitTime,callback:function(e){t.$set(t.searchForm,"commitTime",e)},expression:"searchForm.commitTime"}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit(!0)}}},[t._v("查询")]),t._v(" "),n("Button",{on:{click:function(e){return t.handleSubmit(!1)}}},[t._v("重置")])],1)],1),t._v(" "),n("Table",{attrs:{columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"status",fn:function(e){var r=e.row;return t._l(r.statusShow,(function(t,e){return n("Tooltip",{key:e,attrs:{content:t.label,placement:"top"}},[n("Button",{class:[e<r.statusShow.length-1?"status-style":""],attrs:{type:t.type,shape:"circle",size:"small",icon:t.icon,loading:t.loading}})],1)}))}},{key:"action",fn:function(e){var r=e.row,o=e.index;return[n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleDetail(r.id,r.status)}}},[t._v("详情")]),t._v(" "),t.interruptAuth(r.commitPerson)?n("Poptip",{attrs:{confirm:"",title:"确定中断当前任务吗",transfer:!0,"ok-text":"确定","cancel-text":"取消"},on:{"on-ok":function(e){return t.handleInterrupt(r,o)}}},[[1,2].includes(r.buildStatus)?n("Button",{attrs:{type:"error",size:"small"}},[t._v("中断")]):t._e()],1):t._e()]}}])}),t._v(" "),n("Page",{attrs:{"class-name":"page",total:t.total,current:t.current,size:"small","show-elevator":"","page-size":t.limit,"show-sizer":""},on:{"on-change":t.handleChangePage,"on-page-size-change":t.handleChangeLimit}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);